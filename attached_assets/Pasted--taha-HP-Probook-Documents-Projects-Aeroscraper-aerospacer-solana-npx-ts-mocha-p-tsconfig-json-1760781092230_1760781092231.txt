
taha@HP-Probook:~/Documents/Projects/Aeroscraper/aerospacer-solana$ npx ts-mocha -p ./tsconfig.json -t 1000000 'tests/**/protocol-initialization.ts'
(node:495492) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file:///home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-initialization.ts is not specified and it doesn't parse as CommonJS.
Reparsing as ES module because module syntax was detected. This incurs a performance overhead.
To eliminate this warning, add "type": "module" to /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/package.json.
(Use `node --trace-warnings ...` to show where the warning was created)


  Protocol Contract - Initialization Tests

ðŸš€ Setting up Protocol Initialization Tests...
  Admin: 5oMxbgjPWkBYRKbsh3yKrrEC5Ut8y3azHKc787YHY9Ar
âœ… Oracle and Fees programs initialized
  Oracle State: 9E62DzkJHrtZo6E8RXgeTYoBMvYF86zZhQ52mZbT16F4
  Fee State: 6Msx1A4nMX7toWd7VaZxatsbGR4Lkn3Pt3ubutsZD3Tg
  Stablecoin Mint: BmGAHEGKpP8UujFAJbaX2t5ScWLqgjaC51k81y2hTK9X
    Test 1.1: Initialize Protocol Successfully
ðŸ“‹ Initializing protocol...
  State Account: 2AJXGE9fqs37aChuQkB9nnDkzMTY6vLu8ZWYD1aGJgK6
âœ… Protocol initialized. TX: 2L51ZUfhGXHLymmdeKDkje45xMnwWRpNv5DdVG5fVXK9s5APMVqUfEdwTQcTSjPVBKWmbKo4U2CLbZtS15YssTY8
âœ… All initial state values verified
      âœ” Should initialize protocol with correct initial state (426ms)
    Test 1.2: Prevent Re-initialization
ðŸ”’ Attempting to reinitialize same state account...
âœ… Re-initialization correctly rejected
      âœ” Should fail when trying to reinitialize same state account (466ms)
    Test 1.3: Verify State Properties
âœ… State properties verified:
  admin: 5oMxbgjPWkBYRKbsh3yKrrEC5Ut8y3azHKc787YHY9Ar
  oracle_helper: D8xkMuN8J1v7kH6R8Xd4RwMcTk1HETgfFN24sSB3ZoFJ
  oracle_state: 9E62DzkJHrtZo6E8RXgeTYoBMvYF86zZhQ52mZbT16F4
  fee_distributor: h4ka5hAgZ5Ez7x4bjMiAqQHnuwnfry3aBiWNzUw3F7t
  fee_state: 6Msx1A4nMX7toWd7VaZxatsbGR4Lkn3Pt3ubutsZD3Tg
  MCR: 115
  protocol_fee: 5
  total_debt: 0
  total_stake: 0
  p_factor: 1000000000000000000
  epoch: 0
      âœ” Should have all expected state properties (368ms)
    Test 1.4: Validate Default Parameters
âœ… Default parameters verified
      âœ” Should initialize with correct default values (402ms)
    Test 1.5: Validate P Factor Initialization
âœ… P factor initialized to SCALE_FACTOR
  P factor: 1000000000000000000
      âœ” Should initialize P factor to SCALE_FACTOR (10^18) (409ms)
    Test 1.6: Validate Epoch Initialization
âœ… Epoch initialized to 0
      âœ” Should initialize epoch to 0 (423ms)
    Test 1.7: Validate Oracle and Fee Addresses
âœ… Oracle and fee addresses validated
      âœ” Should correctly store oracle and fee program addresses (412ms)
    Test 1.8: Validate Stablecoin Mint
âœ… Stablecoin mint validated
  Mint address: BmGAHEGKpP8UujFAJbaX2t5ScWLqgjaC51k81y2hTK9X
      âœ” Should correctly store stablecoin mint address (428ms)


  8 passing (5s)
