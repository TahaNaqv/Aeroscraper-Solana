
taha@HP-Probook:~/Documents/Projects/Aeroscraper/aerospacer-solana$ npx ts-mocha -p ./tsconfig.json -t 1000000 'tests/**/protocol-core.ts'
(node:496269) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file:///home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts is not specified and it doesn't parse as CommonJS.
Reparsing as ES module because module syntax was detected. This incurs a performance overhead.
To eliminate this warning, add "type": "module" to /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/package.json.
(Use `node --trace-warnings ...` to show where the warning was created)


  Aeroscraper Protocol Core Operations
Oracle already initialized
Fees already initialized
Protocol already initialized
Protocol collateral vault already exists
Protocol stablecoin vault already exists
    Core Protocol Operations
❌ Trove opening failed: Error: Account `collateralMint` not provided.
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
    at Array.forEach (<anonymous>)
    at validateAccounts (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
    at ix (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
    at txFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
    at MethodsBuilder.rpc (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)
      1) Should open a trove successfully
❌ Adding collateral failed: Error: Account `collateralMint` not provided.
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
    at Array.forEach (<anonymous>)
    at validateAccounts (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
    at ix (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
    at txFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
    at MethodsBuilder.rpc (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)
      2) Should add collateral to existing trove
❌ Borrowing additional loan failed: Error: Account `collateralMint` not provided.
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
    at Array.forEach (<anonymous>)
    at validateAccounts (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
    at ix (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
    at txFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
    at MethodsBuilder.rpc (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)
      3) Should borrow additional loan from trove
❌ Staking failed: AnchorError: AnchorError caused by account: state. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
    at Function.parse (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/error.ts:168:14)
    at translateError (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/error.ts:277:35)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:35:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5) {
  errorLogs: [
    'Program log: AnchorError caused by account: state. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.'
  ],
  logs: [
    'Program 6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2 invoke [1]',
    'Program log: Instruction: Stake',
    'Program log: AnchorError caused by account: state. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.',
    'Program 6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2 consumed 4253 of 200000 compute units',
    'Program 6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2 failed: custom program error: 0xbc4'
  ],
  error: {
    errorCode: { code: 'AccountNotInitialized', number: 3012 },
    errorMessage: 'The program expected this account to be already initialized',
    comparedValues: undefined,
    origin: 'state'
  },
  _programErrorStack: ProgramErrorStack {
    stack: [
      [PublicKey [PublicKey(6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2)]]
    ]
  }
}
      4) Should stake stablecoins in stability pool
❌ Second trove opening failed: Error: Account `collateralMint` not provided.
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
    at Array.forEach (<anonymous>)
    at validateAccounts (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
    at ix (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
    at txFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
    at MethodsBuilder.rpc (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)
      5) Should open a second trove for user2
❌ Loan repayment failed: Error: Account `collateralMint` not provided.
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
    at Array.forEach (<anonymous>)
    at validateAccounts (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
    at ix (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
    at txFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
    at MethodsBuilder.rpc (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)
      6) Should repay loan partially
❌ Removing collateral failed: Error: Account `collateralMint` not provided.
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
    at Array.forEach (<anonymous>)
    at validateAccounts (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
    at ix (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
    at txFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
    at MethodsBuilder.rpc (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)
      7) Should remove collateral from trove
❌ Unstaking failed: AnchorError: AnchorError caused by account: user_stake_amount. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
    at Function.parse (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/error.ts:168:14)
    at translateError (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/error.ts:277:35)
    at MethodsBuilder.rpc [as _rpcFn] (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:35:29)
    at processTicksAndRejections (node:internal/process/task_queues:105:5) {
  errorLogs: [
    'Program log: AnchorError caused by account: user_stake_amount. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.'
  ],
  logs: [
    'Program 6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2 invoke [1]',
    'Program log: Instruction: Unstake',
    'Program log: AnchorError caused by account: user_stake_amount. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.',
    'Program 6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2 consumed 3996 of 200000 compute units',
    'Program 6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2 failed: custom program error: 0xbc4'
  ],
  error: {
    errorCode: { code: 'AccountNotInitialized', number: 3012 },
    errorMessage: 'The program expected this account to be already initialized',
    comparedValues: undefined,
    origin: 'user_stake_amount'
  },
  _programErrorStack: ProgramErrorStack {
    stack: [
      [PublicKey [PublicKey(6qjCWo3diZmBwTHVn1CfegbNQxBMy1q2MqPHUEN5xja2)]]
    ]
  }
}
      8) Should unstake stablecoins from stability pool
    Protocol State Verification
❌ Protocol state verification failed: Error: Account does not exist or has no data 7pK4DrqjS5aQX3FGubHsdiqBnyzHDkv3cx8HaNRztFzH
    at AccountClient.fetch (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
      9) Should verify protocol state after operations
❌ User trove verification failed: TypeError: Cannot read properties of undefined (reading 'fetch')
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:672:73
    at Generator.next (<anonymous>)
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:41:71
    at new Promise (<anonymous>)
    at __awaiter (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:37:12)
    at Context.<anonymous> (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:670:53)
    at callFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runnable.js:366:21)
    at Test.Runnable.run (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runnable.js:354:5)
    at Runner.runTest (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:678:10)
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:801:12
    at next (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:593:14)
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:603:7
    at next (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:486:14)
    at Immediate._onImmediate (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:571:5)
    at processImmediate (node:internal/timers:485:21)
      10) Should verify user trove state
❌ User stake verification failed: TypeError: Cannot read properties of undefined (reading 'fetch')
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:694:73
    at Generator.next (<anonymous>)
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:41:71
    at new Promise (<anonymous>)
    at __awaiter (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:37:12)
    at Context.<anonymous> (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:692:53)
    at callFn (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runnable.js:366:21)
    at Test.Runnable.run (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runnable.js:354:5)
    at Runner.runTest (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:678:10)
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:801:12
    at next (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:593:14)
    at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:603:7
    at next (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:486:14)
    at Immediate._onImmediate (/home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/mocha/lib/runner.js:571:5)
    at processImmediate (node:internal/timers:485:21)
      11) Should verify user stake state


  0 passing (7s)
  11 failing

  1) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should open a trove successfully:
     Error: Account `collateralMint` not provided.
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
      at Array.forEach (<anonymous>)
      at validateAccounts (node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
      at ix (node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
      at txFn (node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
      at MethodsBuilder.rpc (node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)

  2) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should add collateral to existing trove:
     Error: Account `collateralMint` not provided.
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
      at Array.forEach (<anonymous>)
      at validateAccounts (node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
      at ix (node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
      at txFn (node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
      at MethodsBuilder.rpc (node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)

  3) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should borrow additional loan from trove:
     Error: Account `collateralMint` not provided.
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
      at Array.forEach (<anonymous>)
      at validateAccounts (node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
      at ix (node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
      at txFn (node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
      at MethodsBuilder.rpc (node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)

  4) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should stake stablecoins in stability pool:
     Error: AnchorError caused by account: state. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      at Function.parse (node_modules/@coral-xyz/anchor/src/error.ts:168:14)
      at translateError (node_modules/@coral-xyz/anchor/src/error.ts:277:35)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:35:29)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)

  5) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should open a second trove for user2:
     Error: Account `collateralMint` not provided.
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
      at Array.forEach (<anonymous>)
      at validateAccounts (node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
      at ix (node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
      at txFn (node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
      at MethodsBuilder.rpc (node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)

  6) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should repay loan partially:
     Error: Account `collateralMint` not provided.
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
      at Array.forEach (<anonymous>)
      at validateAccounts (node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
      at ix (node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
      at txFn (node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
      at MethodsBuilder.rpc (node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)

  7) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should remove collateral from trove:
     Error: Account `collateralMint` not provided.
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/node_modules/@coral-xyz/anchor/src/program/common.ts:51:15
      at Array.forEach (<anonymous>)
      at validateAccounts (node_modules/@coral-xyz/anchor/src/program/common.ts:46:14)
      at ix (node_modules/@coral-xyz/anchor/src/program/namespace/instruction.ts:44:23)
      at txFn (node_modules/@coral-xyz/anchor/src/program/namespace/transaction.ts:24:14)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:21:18)
      at MethodsBuilder.rpc (node_modules/@coral-xyz/anchor/src/program/namespace/methods.ts:434:17)

  8) Aeroscraper Protocol Core Operations
       Core Protocol Operations
         Should unstake stablecoins from stability pool:
     Error: AnchorError caused by account: user_stake_amount. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      at Function.parse (node_modules/@coral-xyz/anchor/src/error.ts:168:14)
      at translateError (node_modules/@coral-xyz/anchor/src/error.ts:277:35)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/src/program/namespace/rpc.ts:35:29)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)

  9) Aeroscraper Protocol Core Operations
       Protocol State Verification
         Should verify protocol state after operations:
     Error: Account does not exist or has no data 7pK4DrqjS5aQX3FGubHsdiqBnyzHDkv3cx8HaNRztFzH
      at AccountClient.fetch (node_modules/@coral-xyz/anchor/src/program/namespace/account.ts:168:13)
      at processTicksAndRejections (node:internal/process/task_queues:105:5)

  10) Aeroscraper Protocol Core Operations
       Protocol State Verification
         Should verify user trove state:
     TypeError: Cannot read properties of undefined (reading 'fetch')
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:672:73
      at Generator.next (<anonymous>)
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:41:71
      at new Promise (<anonymous>)
      at __awaiter (tests/protocol-core.ts:37:12)
      at Context.<anonymous> (tests/protocol-core.ts:670:53)
      at processImmediate (node:internal/timers:485:21)

  11) Aeroscraper Protocol Core Operations
       Protocol State Verification
         Should verify user stake state:
     TypeError: Cannot read properties of undefined (reading 'fetch')
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:694:73
      at Generator.next (<anonymous>)
      at /home/taha/Documents/Projects/Aeroscraper/aerospacer-solana/tests/protocol-core.ts:41:71
      at new Promise (<anonymous>)
      at __awaiter (tests/protocol-core.ts:37:12)
      at Context.<anonymous> (tests/protocol-core.ts:692:53)
      at processImmediate (node:internal/timers:485:21)



taha@HP-Probook:~/Documents/Projects/Aeroscraper/aerospacer-solana$ 